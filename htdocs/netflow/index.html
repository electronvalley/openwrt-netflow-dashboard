<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>OpenWrt NetFlow Dashboard</title>
<style>
/* ===== VARIABLES ===== */
:root {
  --bg: #060a14;
  --panel: rgba(8,14,28,0.92);
  --card: rgba(14,22,42,0.7);
  --card-hover: rgba(18,28,52,0.85);
  --border: rgba(255,255,255,0.04);
  --green: #00e676;
  --green-dim: rgba(0,230,118,0.08);
  --blue: #448aff;
  --blue-dim: rgba(68,138,255,0.08);
  --orange: #ff9100;
  --orange-dim: rgba(255,145,0,0.08);
  --red: #ff5252;
  --purple: #b388ff;
  --purple-dim: rgba(179,136,255,0.08);
  --cyan: #18ffff;
  --text: #c8d6e5;
  --text-bright: #e8f0fe;
  --muted: #4a5568;
  --glow-green: 0 0 20px rgba(0,230,118,0.15);
  --glow-blue: 0 0 20px rgba(68,138,255,0.15);
  --glow-purple: 0 0 20px rgba(179,136,255,0.15);
}

/* ===== RESET ===== */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden}
body{background:var(--bg);color:var(--text);font-family:'Inter','Segoe UI',system-ui,-apple-system,sans-serif;-webkit-font-smoothing:antialiased}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.06);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.12)}

/* ===== LAYOUT ===== */
#app{
  display:none;
  grid-template-columns:280px 1fr 280px;
  grid-template-rows:56px 1fr 180px;
  height:100vh;
  gap:0;
}

/* ===== HEADER ===== */
#hdr{
  grid-column:1/-1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 28px;
  background:linear-gradient(180deg,rgba(8,14,28,0.98) 0%,rgba(8,14,28,0.88) 100%);
  border-bottom:1px solid rgba(0,230,118,0.06);
  backdrop-filter:blur(12px);
  z-index:10;
}
#hdr h1{
  font-size:14px;
  font-weight:700;
  color:#fff;
  display:flex;
  align-items:center;
  gap:10px;
  letter-spacing:0.5px;
}
.pulse-dot{
  width:8px;height:8px;border-radius:50%;
  background:var(--green);
  box-shadow:0 0 12px var(--green),0 0 4px var(--green);
  animation:pulse 2s cubic-bezier(0.4,0,0.6,1) infinite;
}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.4;transform:scale(0.85)}}

.header-stats{display:flex;gap:32px;align-items:center}
.stat-item{text-align:center;position:relative;padding:0 4px}
.stat-item .val{font-size:16px;font-weight:700;color:var(--green);letter-spacing:-0.3px;font-variant-numeric:tabular-nums}
.stat-item .val.up{color:var(--orange)}
.stat-item .val.conn{color:var(--cyan)}
.stat-item .val.dev{color:var(--purple)}
.stat-item .lbl{font-size:7px;text-transform:uppercase;letter-spacing:2.5px;color:var(--muted);margin-top:2px}
.stat-item::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);width:1px;height:20px;background:rgba(255,255,255,0.04)}
.stat-item:last-child::after{display:none}

/* ===== LEFT PANEL ===== */
#left-panel{
  background:var(--panel);
  border-right:1px solid rgba(0,230,118,0.04);
  padding:20px 16px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.panel-title{
  font-size:9px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:3px;
  color:var(--green);
  display:flex;
  align-items:center;
  gap:8px;
  padding-bottom:8px;
  border-bottom:1px solid rgba(0,230,118,0.06);
}
.panel-title .icon{font-size:12px}

/* Interface cards */
.iface-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px 14px;
  margin-bottom:6px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden;
  cursor:default;
}
.iface-card::before{
  content:'';position:absolute;top:0;left:0;width:3px;height:100%;
  background:var(--green);border-radius:0 3px 3px 0;
  opacity:0.7;transition:opacity 0.3s;
}
.iface-card:hover{
  background:var(--card-hover);
  border-color:rgba(0,230,118,0.15);
  transform:translateX(3px);
}
.iface-card.down{opacity:0.3}
.iface-card.down::before{background:var(--red)}
.iface-name{
  font-size:11px;font-weight:600;color:var(--text-bright);
  display:flex;align-items:center;gap:8px;padding-left:8px;
}
.status-dot{
  width:6px;height:6px;border-radius:50%;
  background:var(--green);box-shadow:0 0 6px var(--green);
  flex-shrink:0;
}
.status-dot.off{background:var(--red);box-shadow:0 0 6px var(--red)}
.iface-stats{
  display:flex;justify-content:space-between;
  margin-top:6px;font-size:9px;padding-left:8px;
  color:var(--muted);
}
.iface-stats .rx{color:var(--blue)}
.iface-stats .tx{color:var(--orange)}
.iface-rate{
  font-size:10px;font-weight:600;color:var(--green);
  margin-top:4px;padding-left:8px;
  display:flex;gap:12px;
}
.iface-rate .dl{color:var(--blue)}
.iface-rate .ul{color:var(--orange)}
.iface-bar{
  height:2px;background:rgba(255,255,255,0.02);
  border-radius:2px;margin-top:6px;overflow:hidden;
}
.iface-bar-fill{
  height:100%;border-radius:2px;
  background:linear-gradient(90deg,var(--green),var(--cyan));
  transition:width 1s cubic-bezier(0.4,0,0.2,1);
}

/* ===== CENTER CANVAS ===== */
#center-panel{
  position:relative;overflow:hidden;
  background:radial-gradient(ellipse at center,rgba(0,230,118,0.015) 0%,transparent 65%);
}
#flow-canvas{display:block;width:100%;height:100%}

/* ===== RIGHT PANEL ===== */
#right-panel{
  background:var(--panel);
  border-left:1px solid rgba(179,136,255,0.04);
  padding:20px 16px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.panel-title.purple{color:var(--purple);border-bottom-color:rgba(179,136,255,0.06)}

/* Device cards */
.device-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:8px;
  padding:10px 12px;
  margin-bottom:4px;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
}
.device-card:hover{
  background:var(--card-hover);
  border-color:rgba(179,136,255,0.15);
}
.device-card.active{border-left:3px solid var(--purple)}
.device-card.active::after{
  content:'';position:absolute;top:6px;right:8px;
  width:5px;height:5px;border-radius:50%;
  background:var(--purple);box-shadow:0 0 8px var(--purple);
  animation:pulse 1.5s ease-in-out infinite;
}
.dev-name{font-size:10px;font-weight:600;color:var(--text-bright);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.dev-ip{font-size:8px;color:var(--muted);margin-top:1px;font-family:'JetBrains Mono',monospace}
.dev-meta{display:flex;gap:10px;margin-top:4px;font-size:8px}
.dev-meta .conns{color:var(--purple);font-weight:600}
.dev-meta .bytes{color:var(--blue)}
.dev-meta .mac{color:var(--muted)}
/* ===== BOTTOM PANEL ===== */
#bottom-panel{
  grid-column:1/-1;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  padding:14px 24px;
  background:linear-gradient(0deg,rgba(8,14,28,0.98) 0%,rgba(8,14,28,0.85) 100%);
  border-top:1px solid var(--border);
  backdrop-filter:blur(12px);
}
.stat-box{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px 16px;
  position:relative;
  overflow:hidden;
}
.stat-box::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(0,230,118,0.12),transparent);
}
.stat-box h3{
  font-size:7px;font-weight:700;text-transform:uppercase;
  letter-spacing:3px;color:var(--muted);margin-bottom:8px;
}
.stat-box .big-val{font-size:22px;font-weight:700;line-height:1;font-variant-numeric:tabular-nums}
.stat-box .sub-val{font-size:8px;color:var(--muted);margin-top:3px}
.proto-row{display:flex;gap:20px;margin-top:6px}
.proto-item .pv{font-size:18px;font-weight:700}
.proto-item .pl{font-size:7px;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;margin-top:1px}
.traffic-bar-wrap{margin-bottom:4px}
.traffic-bar-row{
  display:flex;align-items:center;gap:8px;
  margin-bottom:3px;font-size:8px;
}
.traffic-bar-label{width:48px;color:var(--orange);font-weight:600;text-align:right}
.traffic-bar-track{flex:1;height:3px;background:rgba(255,255,255,0.02);border-radius:3px;overflow:hidden}
.traffic-bar-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--orange),#ff6d00);transition:width 0.6s}
.traffic-bar-val{width:55px;text-align:right;color:var(--muted);font-size:7px}
.sys-row{display:flex;justify-content:space-between;font-size:9px;margin-bottom:2px}
.sys-bar{height:4px;background:rgba(255,255,255,0.02);border-radius:3px;overflow:hidden;margin-bottom:6px}
.sys-bar-fill{height:100%;border-radius:3px;transition:width 0.6s}
.wan-chart{display:flex;gap:1px;height:32px;align-items:flex-end;margin-top:6px}
.wan-bar{flex:1;border-radius:2px 2px 0 0;min-height:1px;transition:height 0.4s}
.wan-speed{display:flex;gap:20px;margin-top:4px}
.wan-speed .ws-val{font-size:15px;font-weight:700}
.wan-speed .ws-lbl{font-size:7px;color:var(--muted);text-transform:uppercase;letter-spacing:1px}

/* ===== LOGIN OVERLAY ===== */
#login-overlay{
  position:fixed;inset:0;z-index:1000;
  display:flex;align-items:center;justify-content:center;
  background:radial-gradient(ellipse at center,rgba(8,16,36,0.98) 0%,rgba(4,6,14,0.99) 100%);
}
#login-overlay.hidden{display:none}
#login-overlay canvas{position:absolute;inset:0;z-index:0}
#login-box{
  position:relative;z-index:1;
  background:rgba(10,18,36,0.85);
  border:1px solid rgba(0,230,118,0.1);
  border-radius:20px;
  padding:48px 44px;
  width:380px;
  text-align:center;
  backdrop-filter:blur(24px);
  box-shadow:0 32px 80px rgba(0,0,0,0.6),var(--glow-green);
}
#login-box h2{
  color:#fff;font-size:22px;font-weight:800;margin-bottom:4px;
  letter-spacing:-0.3px;
}
#login-box .logo{
  font-size:36px;margin-bottom:12px;
  filter:drop-shadow(0 0 12px rgba(0,230,118,0.3));
}
#login-box .subtitle{color:var(--muted);font-size:11px;margin-bottom:28px;letter-spacing:0.5px}
#login-box input{
  width:100%;padding:13px 16px;margin-bottom:10px;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:10px;
  color:#fff;font-size:13px;
  outline:none;transition:all 0.3s;
}
#login-box input:focus{
  border-color:rgba(0,230,118,0.4);
  box-shadow:0 0 20px rgba(0,230,118,0.06);
  background:rgba(255,255,255,0.05);
}
#login-box input::placeholder{color:rgba(255,255,255,0.2)}
#login-box button{
  width:100%;padding:14px;margin-top:8px;
  background:linear-gradient(135deg,#00e676 0%,#00c853 100%);
  border:none;border-radius:10px;
  color:#fff;font-weight:700;font-size:14px;
  cursor:pointer;transition:all 0.3s;
  letter-spacing:0.5px;
  box-shadow:0 4px 16px rgba(0,230,118,0.2);
}
#login-box button:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 30px rgba(0,230,118,0.35);
}
#login-box button:active{transform:translateY(0)}
#login-error{color:var(--red);font-size:10px;margin-top:10px;display:none}

/* ===== SECURITY SECTION (left panel) ===== */
.security-section{margin-top:auto}
.sec-card{
  background:var(--card);
  border:1px solid rgba(0,230,118,0.06);
  border-radius:10px;
  padding:12px 14px;
}
.sec-row{display:flex;justify-content:space-between;align-items:center;font-size:9px;margin-bottom:4px}
.sec-row:last-child{margin-bottom:0}
.sec-badge{
  padding:2px 8px;border-radius:4px;font-size:7px;font-weight:700;
  text-transform:uppercase;letter-spacing:1px;
}
.sec-badge.ok{background:rgba(0,230,118,0.1);color:var(--green)}
.sec-badge.warn{background:rgba(255,145,0,0.1);color:var(--orange)}
.sec-badge.danger{background:rgba(255,82,82,0.1);color:var(--red)}

/* ===== UTILITIES ===== */
.cg{color:var(--green)}.cb{color:var(--blue)}.co{color:var(--orange)}
.cr{color:var(--red)}.cp{color:var(--purple)}.cc{color:var(--cyan)}
.fw7{font-weight:700}
.mono{font-family:'JetBrains Mono','Fira Code',monospace}
</style>
</head>
<body>

<!-- ===== LOGIN SCREEN ===== -->
<div id="login-overlay">
  <canvas id="login-canvas"></canvas>
  <div id="login-box">
    <div class="logo">üåê</div>
    <h2>NetFlow Dashboard</h2>
    <div class="subtitle">Monitoring r√©seau temps r√©el ‚Ä¢ OpenWrt</div>
    <input id="input-host" value="192.168.10.1" placeholder="Adresse du routeur">
    <input id="input-user" value="root" placeholder="Utilisateur">
    <input type="password" id="input-pass" placeholder="Mot de passe" autofocus>
    <button onclick="doLogin()">Connexion</button>
    <div id="login-error">‚ö† √âchec d'authentification</div>
  </div>
</div>

<!-- ===== MAIN APP ===== -->
<div id="app">
  <!-- Header -->
  <div id="hdr">
    <h1><span class="pulse-dot"></span>NetFlow Dashboard</h1>
    <div class="header-stats">
      <div class="stat-item"><div class="val" id="h-dl">--</div><div class="lbl">Download</div></div>
      <div class="stat-item"><div class="val up" id="h-ul">--</div><div class="lbl">Upload</div></div>
      <div class="stat-item"><div class="val conn" id="h-conn">--</div><div class="lbl">Connexions</div></div>
      <div class="stat-item"><div class="val dev" id="h-dev">--</div><div class="lbl">Appareils</div></div>
      <div class="stat-item"><div class="val up" id="h-uptime">--</div><div class="lbl">Uptime</div></div>
    </div>
  </div>

  <!-- Left: Interfaces -->
  <div id="left-panel">
    <div class="panel-title"><span class="icon">‚ö°</span> Interfaces R√©seau</div>
    <div id="iface-list"></div>
    <div class="security-section">
      <div class="panel-title" style="color:var(--cyan);border-bottom-color:rgba(24,255,255,0.06)"><span class="icon">üõ°Ô∏è</span> S√©curit√©</div>
      <div class="sec-card" id="sec-info"></div>
    </div>
  </div>

  <!-- Center: Flow Animation -->
  <div id="center-panel">
    <canvas id="flow-canvas"></canvas>
  </div>

  <!-- Right: Devices -->
  <div id="right-panel">
    <div class="panel-title purple"><span class="icon">üì±</span> Appareils Connect√©s</div>
    <div id="device-list"></div>
  </div>

  <!-- Bottom: Stats -->
  <div id="bottom-panel">
    <div class="stat-box">
      <h3>üîí Protocoles</h3>
      <div id="box-proto"></div>
    </div>
    <div class="stat-box">
      <h3>üåê Types de Trafic</h3>
      <div id="box-traffic"></div>
    </div>
    <div class="stat-box">
      <h3>üíª Syst√®me</h3>
      <div id="box-sys"></div>
    </div>
    <div class="stat-box">
      <h3>‚ö° D√©bit WAN</h3>
      <div id="box-wan-speed"></div>
      <div class="wan-chart" id="wan-chart"></div>
    </div>
  </div>
</div>

<script>
/* ===== STATE ===== */
var CFG = { host: '', user: '', token: null };
var DATA = {
  interfaces: {},
  conntrack: [],
  sysinfo: null,
  hints: {},
  leases: [],
  prevRx: {},
  prevTx: {},
  prevTime: 0,
  rates: {},
  wanHistory: [],
  wireless: {}
};
var canvas, ctx, particles = [], frameCount = 0;

/* ===== LOGIN BACKGROUND ANIMATION ===== */
(function initLoginBg() {
  var c = document.getElementById('login-canvas');
  if (!c) return;
  var x = c.getContext('2d');
  var dots = [];
  function resize() {
    c.width = window.innerWidth;
    c.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);
  for (var i = 0; i < 60; i++) {
    dots.push({
      x: Math.random() * c.width,
      y: Math.random() * c.height,
      vx: (Math.random() - 0.5) * 0.4,
      vy: (Math.random() - 0.5) * 0.4,
      r: 1 + Math.random() * 1.5
    });
  }
  function draw() {
    x.clearRect(0, 0, c.width, c.height);
    for (var i = 0; i < dots.length; i++) {
      var d = dots[i];
      d.x += d.vx; d.y += d.vy;
      if (d.x < 0 || d.x > c.width) d.vx *= -1;
      if (d.y < 0 || d.y > c.height) d.vy *= -1;
      x.beginPath();
      x.arc(d.x, d.y, d.r, 0, Math.PI * 2);
      x.fillStyle = 'rgba(0,230,118,0.15)';
      x.fill();
      for (var j = i + 1; j < dots.length; j++) {
        var d2 = dots[j];
        var dx = d.x - d2.x, dy = d.y - d2.y;
        var dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 120) {
          x.beginPath();
          x.moveTo(d.x, d.y);
          x.lineTo(d2.x, d2.y);
          x.strokeStyle = 'rgba(0,230,118,' + (0.03 * (1 - dist / 120)) + ')';
          x.lineWidth = 0.5;
          x.stroke();
        }
      }
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ===== LOGIN ===== */
function doLogin() {
  CFG.host = document.getElementById('input-host').value;
  CFG.user = document.getElementById('input-user').value;
  var pw = document.getElementById('input-pass').value;
  var errEl = document.getElementById('login-error');
  errEl.style.display = 'none';

  fetch('http://' + CFG.host + '/ubus/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      jsonrpc: '2.0', id: 1, method: 'call',
      params: ['00000000000000000000000000000000', 'session', 'login',
        { username: CFG.user, password: pw }]
    })
  })
  .then(function(r) { return r.json(); })
  .then(function(j) {
    if (j.result && j.result[0] === 0) {
      CFG.token = j.result[1].ubus_rpc_session;
      document.getElementById('login-overlay').classList.add('hidden');
      document.getElementById('app').style.display = 'grid';
      initApp();
    } else {
      errEl.style.display = 'block';
    }
  })
  .catch(function() { errEl.style.display = 'block'; });
}
document.getElementById('input-pass').addEventListener('keydown', function(e) {
  if (e.key === 'Enter') doLogin();
});

/* ===== UBUS CALL ===== */
function ubusCall(obj, method, params) {
  return fetch('http://' + CFG.host + '/ubus/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      jsonrpc: '2.0', id: 1, method: 'call',
      params: [CFG.token, obj, method, params || {}]
    })
  })
  .then(function(r) { return r.json(); })
  .then(function(j) { return (j.result && j.result[0] === 0) ? j.result[1] : null; })
  .catch(function() { return null; });
}

/* ===== FETCH ALL DATA ===== */
function fetchAllData() {
  Promise.all([
    ubusCall('luci-rpc', 'getNetworkDevices'),
    ubusCall('system', 'info'),
    ubusCall('luci-rpc', 'getDHCPLeases'),
    ubusCall('luci-rpc', 'getHostHints'),
    ubusCall('luci', 'getConntrackList'),
    ubusCall('luci-rpc', 'getWirelessDevices')
  ]).then(function(results) {
    var nd = results[0], si = results[1], dh = results[2];
    var hh = results[3], ct = results[4], wd = results[5];
    var now = Date.now();

    // Calculate rates
    if (nd) {
      for (var n in nd) {
        if (n === 'lo') continue;
        var rx = (nd[n].stats || {}).rx_bytes || 0;
        var tx = (nd[n].stats || {}).tx_bytes || 0;
        if (DATA.prevRx[n] !== undefined && DATA.prevTime) {
          var dt = (now - DATA.prevTime) / 1000;
          if (dt > 0) {
            DATA.rates[n] = {
              rx: Math.max(0, (rx - DATA.prevRx[n]) / dt),
              tx: Math.max(0, (tx - DATA.prevTx[n]) / dt)
            };
          }
        }
        DATA.prevRx[n] = rx;
        DATA.prevTx[n] = tx;
      }
      DATA.prevTime = now;
      DATA.interfaces = nd;
    }
    if (si) DATA.sysinfo = si;
    if (dh) DATA.leases = dh.dhcp_leases || [];
    if (hh) DATA.hints = hh;
    if (ct) DATA.conntrack = ct;
    if (wd) DATA.wireless = wd;

    // WAN history
    var wr = DATA.rates['wan'];
    if (wr) {
      DATA.wanHistory.push({ rx: wr.rx, tx: wr.tx, t: now });
      if (DATA.wanHistory.length > 60) DATA.wanHistory.shift();
    }

    updateUI();
  });
}
/* ===== UTILITIES ===== */
function fmtBytes(b) {
  if (!b || b === 0) return '0 B';
  var k = 1024, s = ['B', 'KB', 'MB', 'GB', 'TB'];
  var i = Math.floor(Math.log(Math.abs(b)) / Math.log(k));
  i = Math.min(i, s.length - 1);
  return (b / Math.pow(k, i)).toFixed(1) + ' ' + s[i];
}
function fmtRate(b) {
  if (!b || b < 1) return '0 B/s';
  return fmtBytes(b) + '/s';
}
function fmtUptime(s) {
  var d = Math.floor(s / 86400);
  var h = Math.floor((s % 86400) / 3600);
  var m = Math.floor((s % 3600) / 60);
  if (d > 0) return d + 'j ' + h + 'h';
  if (h > 0) return h + 'h ' + m + 'm';
  return m + 'm';
}

/* ===== UPDATE UI ===== */
function updateUI() {
  var wr = DATA.rates['wan'] || { rx: 0, tx: 0 };

  // Header stats
  document.getElementById('h-dl').textContent = fmtRate(wr.rx);
  document.getElementById('h-ul').textContent = fmtRate(wr.tx);
  document.getElementById('h-conn').textContent = DATA.conntrack.length || '--';
  document.getElementById('h-dev').textContent = DATA.leases.length || '--';
  if (DATA.sysinfo) {
    document.getElementById('h-uptime').textContent = fmtUptime(DATA.sysinfo.uptime);
  }

  // ===== LEFT: Interfaces =====
  var ifOrder = ['wan', 'br-lan', 'phy0-ap0', 'lan2', 'lan3', 'lan1', 'wlan1'];
  var ifLabels = {
    wan: 'WAN (Internet)', 'br-lan': 'Bridge LAN', 'phy0-ap0': 'WiFi 2.4GHz',
    lan2: 'LAN 2', lan3: 'LAN 3', lan1: 'LAN 1', wlan1: 'WiFi 5GHz'
  };

  var maxRate = 1;
  for (var n in DATA.rates) {
    var rr = DATA.rates[n];
    if ((rr.rx || 0) + (rr.tx || 0) > maxRate) maxRate = (rr.rx || 0) + (rr.tx || 0);
  }

  var ifHtml = '';
  for (var i = 0; i < ifOrder.length; i++) {
    var nm = ifOrder[i];
    var iface = DATA.interfaces[nm];
    if (!iface) continue;
    var rate = DATA.rates[nm] || { rx: 0, tx: 0 };
    var isUp = iface.flags ? iface.flags.up : false;
    var pct = Math.min(100, ((rate.rx + rate.tx) / maxRate) * 100);

    ifHtml += '<div class="iface-card' + (isUp ? '' : ' down') + '">';
    ifHtml += '<div class="iface-name"><span class="status-dot' + (isUp ? '' : ' off') + '"></span>' + (ifLabels[nm] || nm) + '</div>';
    ifHtml += '<div class="iface-stats"><span class="rx">\u2193 ' + fmtBytes((iface.stats || {}).rx_bytes || 0) + '</span>';
    ifHtml += '<span class="tx">\u2191 ' + fmtBytes((iface.stats || {}).tx_bytes || 0) + '</span></div>';
    ifHtml += '<div class="iface-rate"><span class="dl">\u2193 ' + fmtRate(rate.rx) + '</span>';
    ifHtml += '<span class="ul">\u2191 ' + fmtRate(rate.tx) + '</span></div>';
    ifHtml += '<div class="iface-bar"><div class="iface-bar-fill" style="width:' + pct + '%"></div></div>';
    ifHtml += '</div>';
  }
  document.getElementById('iface-list').innerHTML = ifHtml;

  // ===== SECURITY =====
  var totalConn = DATA.conntrack.length;
  var suspPorts = [23, 445, 3389, 8080, 8443, 5900, 4444, 1433, 3306, 6379, 27017];
  var suspCount = 0;
  var extConns = 0;
  var protoCount = { tcp: 0, udp: 0, other: 0 };
  for (var i = 0; i < DATA.conntrack.length; i++) {
    var c = DATA.conntrack[i];
    if (c.dport && suspPorts.indexOf(parseInt(c.dport)) !== -1) suspCount++;
    if (c.dst && !c.dst.startsWith('192.168.') && !c.dst.startsWith('10.') && !c.dst.startsWith('172.')) extConns++;
    if (c.layer4 === 'tcp') protoCount.tcp++;
    else if (c.layer4 === 'udp') protoCount.udp++;
    else protoCount.other++;
  }

  var secStatus = suspCount === 0 ? 'ok' : (suspCount < 5 ? 'warn' : 'danger');
  var secLabel = suspCount === 0 ? 'S\u00e9curis\u00e9' : (suspCount < 5 ? 'Attention' : 'Alerte');
  var fwStatus = DATA.conntrack.length > 0 ? 'ok' : 'warn';
  var secHtml = '';
  secHtml += '<div class="sec-row"><span>\u00c9tat</span><span class="sec-badge ' + secStatus + '">' + secLabel + '</span></div>';
  secHtml += '<div class="sec-row"><span>Firewall</span><span class="sec-badge ' + fwStatus + '">Actif</span></div>';
  secHtml += '<div class="sec-row"><span>Ports suspects</span><span class="' + (suspCount > 0 ? 'co' : 'cg') + ' fw7">' + suspCount + '</span></div>';
  secHtml += '<div class="sec-row"><span>Conn. externes</span><span class="cc fw7">' + extConns + '</span></div>';
  secHtml += '<div class="sec-row"><span>Conn. totales</span><span class="cg fw7">' + totalConn + '</span></div>';
  document.getElementById('sec-info').innerHTML = secHtml;

  // ===== RIGHT: Devices =====
  var devConns = {}, devBytes = {};
  for (var i = 0; i < DATA.conntrack.length; i++) {
    var c = DATA.conntrack[i];
    devConns[c.src] = (devConns[c.src] || 0) + 1;
    devBytes[c.src] = (devBytes[c.src] || 0) + (c.bytes || 0);
  }

  var devices = DATA.leases.map(function(l) {
    return {
      name: l.hostname || 'Inconnu',
      ip: l.ipaddr,
      mac: l.macaddr || '',
      conns: devConns[l.ipaddr] || 0,
      bytes: devBytes[l.ipaddr] || 0
    };
  }).sort(function(a, b) { return b.bytes - a.bytes; });

  var devHtml = '';
  for (var i = 0; i < devices.length; i++) {
    var d = devices[i];
    devHtml += '<div class="device-card' + (d.conns > 0 ? ' active' : '') + '">';
    devHtml += '<div class="dev-name">' + d.name + '</div>';
    devHtml += '<div class="dev-ip">' + d.ip + '</div>';
    devHtml += '<div class="dev-meta">';
    devHtml += '<span class="conns">' + d.conns + ' conn</span>';
    devHtml += '<span class="bytes">' + fmtBytes(d.bytes) + '</span>';
    if (d.mac) devHtml += '<span class="mac">' + d.mac.substring(0, 8) + '...</span>';
    devHtml += '</div></div>';
  }
  document.getElementById('device-list').innerHTML = devHtml;
  // ===== BOTTOM: Protocols =====
  var protoHtml = '<div class="proto-row">';
  protoHtml += '<div class="proto-item"><div class="pv cb">' + protoCount.tcp + '</div><div class="pl">TCP</div></div>';
  protoHtml += '<div class="proto-item"><div class="pv cg">' + protoCount.udp + '</div><div class="pl">UDP</div></div>';
  if (protoCount.other > 0) protoHtml += '<div class="proto-item"><div class="pv co">' + protoCount.other + '</div><div class="pl">Autre</div></div>';
  protoHtml += '</div>';
  var totalBytes = 0;
  for (var i = 0; i < DATA.conntrack.length; i++) totalBytes += DATA.conntrack[i].bytes || 0;
  protoHtml += '<div class="sub-val" style="margin-top:6px">Total: ' + fmtBytes(totalBytes) + '</div>';
  document.getElementById('box-proto').innerHTML = protoHtml;

  // ===== BOTTOM: Traffic Types =====
  var portBytes = {};
  var portLabels = {
    443: 'HTTPS', 80: 'HTTP', 53: 'DNS', 22: 'SSH', 8883: 'MQTT',
    5228: 'Google', 123: 'NTP', 8266: 'IoT', 9993: 'ZeroTier',
    8802: 'Stream', 993: 'IMAP', 587: 'SMTP', 1883: 'MQTT',
    5353: 'mDNS', 67: 'DHCP', 68: 'DHCP', 1900: 'UPnP'
  };
  for (var i = 0; i < DATA.conntrack.length; i++) {
    var c = DATA.conntrack[i];
    if (c.dport) portBytes[c.dport] = (portBytes[c.dport] || 0) + (c.bytes || 0);
  }
  var topPorts = Object.keys(portBytes).sort(function(a, b) {
    return portBytes[b] - portBytes[a];
  }).slice(0, 5);

  var trafficHtml = '<div class="traffic-bar-wrap" style="margin-top:4px">';
  var maxPortBytes = portBytes[topPorts[0]] || 1;
  for (var i = 0; i < topPorts.length; i++) {
    var p = topPorts[i];
    var label = portLabels[p] || ('P' + p);
    var pct = Math.max(3, (portBytes[p] / maxPortBytes) * 100);
    trafficHtml += '<div class="traffic-bar-row">';
    trafficHtml += '<span class="traffic-bar-label">' + label + '</span>';
    trafficHtml += '<div class="traffic-bar-track"><div class="traffic-bar-fill" style="width:' + pct + '%"></div></div>';
    trafficHtml += '<span class="traffic-bar-val">' + fmtBytes(portBytes[p]) + '</span>';
    trafficHtml += '</div>';
  }
  trafficHtml += '</div>';
  document.getElementById('box-traffic').innerHTML = trafficHtml;

  // ===== BOTTOM: System =====
  if (DATA.sysinfo) {
    var mem = DATA.sysinfo.memory;
    var memPct = Math.round(((mem.total - mem.available) / mem.total) * 100);
    var cpuLoad = (DATA.sysinfo.load[0] / 65536).toFixed(2);
    var sysHtml = '';
    sysHtml += '<div class="sys-row"><span>CPU Load</span><span class="cg fw7">' + cpuLoad + '</span></div>';
    sysHtml += '<div class="sys-row"><span>RAM</span><span class="' + (memPct > 80 ? 'cr' : 'cb') + ' fw7">' + memPct + '% (' + fmtBytes(mem.total - mem.available) + ' / ' + fmtBytes(mem.total) + ')</span></div>';
    sysHtml += '<div class="sys-bar"><div class="sys-bar-fill" style="width:' + memPct + '%;background:' + (memPct > 80 ? 'var(--red)' : 'var(--blue)') + '"></div></div>';
    if (DATA.sysinfo.swap && DATA.sysinfo.swap.total > 0) {
      var swPct = Math.round(DATA.sysinfo.swap.used / DATA.sysinfo.swap.total * 100);
      sysHtml += '<div class="sys-row"><span>Swap</span><span class="co fw7">' + swPct + '%</span></div>';
      sysHtml += '<div class="sys-bar"><div class="sys-bar-fill" style="width:' + swPct + '%;background:var(--orange)"></div></div>';
    }
    document.getElementById('box-sys').innerHTML = sysHtml;
  }

  // ===== BOTTOM: WAN Chart =====
  var wChart = document.getElementById('wan-chart');
  var maxWan = 1;
  for (var i = 0; i < DATA.wanHistory.length; i++) {
    var v = DATA.wanHistory[i].rx + DATA.wanHistory[i].tx;
    if (v > maxWan) maxWan = v;
  }
  var chartHtml = '';
  var startIdx = Math.max(0, DATA.wanHistory.length - 30);
  for (var i = startIdx; i < DATA.wanHistory.length; i++) {
    var pct = Math.max(3, ((DATA.wanHistory[i].rx + DATA.wanHistory[i].tx) / maxWan) * 100);
    chartHtml += '<div class="wan-bar" style="height:' + pct + '%;background:rgba(0,230,118,' + (0.12 + pct / 200) + ')"></div>';
  }
  wChart.innerHTML = chartHtml;
  document.getElementById('box-wan-speed').innerHTML = '<div class="wan-speed"><div><div class="ws-val cg">' + fmtRate(wr.rx) + '</div><div class="ws-lbl">Download</div></div><div><div class="ws-val co">' + fmtRate(wr.tx) + '</div><div class="ws-lbl">Upload</div></div></div>';
}
/* ===== CANVAS ANIMATION ===== */
function initCanvas() {
  canvas = document.getElementById('flow-canvas');
  ctx = canvas.getContext('2d');
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
}

function resizeCanvas() {
  var rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width;
  canvas.height = rect.height;
}

/* Particle constructor */
function Particle(path, color, speed) {
  this.path = path;
  this.color = color;
  this.speed = speed;
  this.progress = Math.random();
  this.size = 1.2 + Math.random() * 2.8;
  this.opacity = 0.25 + Math.random() * 0.65;
  this.trail = [];
}

Particle.prototype.update = function() {
  this.progress += this.speed;
  if (this.progress > 1) this.progress -= 1;
  var pos = this.getPos();
  this.trail.push({ x: pos.x, y: pos.y });
  if (this.trail.length > 6) this.trail.shift();
};

Particle.prototype.getPos = function() {
  var n = this.path.length - 1;
  var idx = this.progress * n;
  var i = Math.floor(idx);
  var t = idx - i;
  var a = this.path[Math.min(i, n)];
  var b = this.path[Math.min(i + 1, n)];
  return { x: a.x + (b.x - a.x) * t, y: a.y + (b.y - a.y) * t };
};

Particle.prototype.draw = function(c) {
  // Trail
  if (this.trail.length > 1) {
    c.beginPath();
    c.moveTo(this.trail[0].x, this.trail[0].y);
    for (var i = 1; i < this.trail.length; i++) {
      c.lineTo(this.trail[i].x, this.trail[i].y);
    }
    c.strokeStyle = this.color;
    c.lineWidth = this.size * 0.5;
    c.globalAlpha = this.opacity * 0.15;
    c.stroke();
  }

  // Main dot
  var p = this.getPos();
  c.globalAlpha = this.opacity;
  c.beginPath();
  c.arc(p.x, p.y, this.size, 0, Math.PI * 2);
  c.fillStyle = this.color;
  c.fill();

  // Glow
  var g = c.createRadialGradient(p.x, p.y, 0, p.x, p.y, this.size * 6);
  g.addColorStop(0, this.color);
  g.addColorStop(1, 'transparent');
  c.fillStyle = g;
  c.globalAlpha = this.opacity * 0.08;
  c.beginPath();
  c.arc(p.x, p.y, this.size * 6, 0, Math.PI * 2);
  c.fill();
  c.globalAlpha = 1;
};

/* Generate bezier curve points */
function makeBezier(x1, y1, x2, y2, curveAmount) {
  var pts = [];
  var steps = 50;
  var ca = curveAmount || 0;
  var mx = (x1 + x2) / 2;
  var my = (y1 + y2) / 2;
  var cx1 = x1 + (x2 - x1) * 0.35;
  var cy1 = y1 + ca;
  var cx2 = x1 + (x2 - x1) * 0.65;
  var cy2 = y2 + ca;
  for (var i = 0; i <= steps; i++) {
    var t = i / steps;
    var u = 1 - t;
    pts.push({
      x: u * u * u * x1 + 3 * u * u * t * cx1 + 3 * u * t * t * cx2 + t * t * t * x2,
      y: u * u * u * y1 + 3 * u * u * t * cy1 + 3 * u * t * t * cy2 + t * t * t * y2
    });
  }
  return pts;
}

/* Draw a path line */
function drawPathLine(path, color, width) {
  ctx.beginPath();
  ctx.moveTo(path[0].x, path[0].y);
  for (var i = 1; i < path.length; i++) {
    ctx.lineTo(path[i].x, path[i].y);
  }
  ctx.strokeStyle = color;
  ctx.lineWidth = width || 1;
  ctx.globalAlpha = 0.1;
  ctx.stroke();
  ctx.globalAlpha = 1;
}

/* Draw node circle with rotating arc */
function drawNode(x, y, radius, label, sublabel, color, value) {
  var t = Date.now() / 1000;

  // Outer ring glow
  var rg = ctx.createRadialGradient(x, y, radius * 0.6, x, y, radius * 2);
  rg.addColorStop(0, 'transparent');
  rg.addColorStop(0.5, color + '08');
  rg.addColorStop(1, 'transparent');
  ctx.fillStyle = rg;
  ctx.fillRect(x - radius * 2, y - radius * 2, radius * 4, radius * 4);

  // Outer circle
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI * 2);
  ctx.strokeStyle = color;
  ctx.lineWidth = 1.5;
  ctx.globalAlpha = 0.15;
  ctx.stroke();
  ctx.globalAlpha = 1;

  // Inner fill
  ctx.beginPath();
  ctx.arc(x, y, radius - 3, 0, Math.PI * 2);
  ctx.fillStyle = 'rgba(8,12,24,0.92)';
  ctx.fill();

  // Rotating arc
  var arcStart = t * 1.5 % (Math.PI * 2);
  ctx.beginPath();
  ctx.arc(x, y, radius, arcStart, arcStart + Math.PI * 0.6);
  ctx.strokeStyle = color;
  ctx.lineWidth = 2.5;
  ctx.globalAlpha = 0.6;
  ctx.stroke();
  ctx.globalAlpha = 1;

  // Second rotating arc (slower, opposite)
  var arcStart2 = -t * 0.8 % (Math.PI * 2);
  ctx.beginPath();
  ctx.arc(x, y, radius + 4, arcStart2, arcStart2 + Math.PI * 0.35);
  ctx.strokeStyle = color;
  ctx.lineWidth = 1;
  ctx.globalAlpha = 0.25;
  ctx.stroke();
  ctx.globalAlpha = 1;

  // Label text
  ctx.textAlign = 'center';
  ctx.fillStyle = '#fff';
  ctx.font = 'bold 12px sans-serif';
  ctx.fillText(label, x, y - (sublabel ? 5 : 3));
  if (sublabel) {
    ctx.fillStyle = color;
    ctx.font = '8px sans-serif';
    ctx.fillText(sublabel, x, y + 8);
  }
  if (value) {
    ctx.fillStyle = '#bbb';
    ctx.font = 'bold 9px sans-serif';
    ctx.fillText(value, x, y + 22);
  }
}

/* Draw info box on canvas */
function drawInfoBox(x, y, w, h, label, sub, color) {
  // Box background
  ctx.fillStyle = 'rgba(8,16,32,0.8)';
  ctx.strokeStyle = color + '30';
  ctx.lineWidth = 1;
  var r = 6;
  ctx.beginPath();
  ctx.moveTo(x + r, y); ctx.lineTo(x + w - r, y);
  ctx.quadraticCurveTo(x + w, y, x + w, y + r);
  ctx.lineTo(x + w, y + h - r);
  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
  ctx.lineTo(x + r, y + h);
  ctx.quadraticCurveTo(x, y + h, x, y + h - r);
  ctx.lineTo(x, y + r);
  ctx.quadraticCurveTo(x, y, x + r, y);
  ctx.closePath();
  ctx.fill(); ctx.stroke();

  // Left accent
  ctx.fillStyle = color;
  ctx.globalAlpha = 0.5;
  ctx.fillRect(x, y + 4, 2, h - 8);
  ctx.globalAlpha = 1;

  // Text
  ctx.fillStyle = '#ddd';
  ctx.font = '9px sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText(label, x + 10, y + h / 2 + 1);
  if (sub) {
    ctx.fillStyle = color;
    ctx.font = '7px sans-serif';
    ctx.fillText(sub, x + 10, y + h / 2 + 11);
  }
}

/* Draw section label */
function drawLabel(x, y, text, color) {
  ctx.fillStyle = color;
  ctx.font = 'bold 9px sans-serif';
  ctx.textAlign = 'left';
  ctx.globalAlpha = 0.7;
  ctx.fillText(text, x, y);
  var tw = ctx.measureText(text).width;
  ctx.beginPath();
  ctx.moveTo(x, y + 4);
  ctx.lineTo(x + tw + 12, y + 4);
  ctx.strokeStyle = color;
  ctx.lineWidth = 1;
  ctx.globalAlpha = 0.15;
  ctx.stroke();
  ctx.globalAlpha = 1;
}
/* ===== MAIN RENDER LOOP ===== */
function renderFrame() {
  var W = canvas.width, H = canvas.height;
  ctx.clearRect(0, 0, W, H);

  // Grid background
  ctx.strokeStyle = 'rgba(0,230,118,0.012)';
  ctx.lineWidth = 1;
  for (var x = 0; x < W; x += 40) {
    ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke();
  }
  for (var y = 0; y < H; y += 40) {
    ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke();
  }

  // Layout calculations
  var ifaceNames = ['wan', 'br-lan', 'phy0-ap0', 'lan2', 'lan3'];
  var ifaceLabels = { wan: 'WAN', 'br-lan': 'LAN', 'phy0-ap0': 'WiFi', lan2: 'LAN2', lan3: 'LAN3' };

  var ifSpacing = Math.min(55, (H - 100) / ifaceNames.length);
  var ifStartY = (H - ifaceNames.length * ifSpacing) / 2;

  var routerX = W * 0.30, routerY = H * 0.45;
  var firewallX = W * 0.70, firewallY = H * 0.45;

  var topDevs = DATA.leases.slice(0, Math.min(7, DATA.leases.length));
  var devSpacing = Math.min(50, (H - 80) / Math.max(topDevs.length, 1));
  var devStartY = (H - topDevs.length * devSpacing) / 2;

  // Build paths
  var pathsIF = [], pathRF, pathsDev = [], pathsExtra = [];

  // Interfaces -> Router
  drawLabel(20, ifStartY - 20, 'INTERFACES', '#00e676');
  for (var i = 0; i < ifaceNames.length; i++) {
    var nm = ifaceNames[i];
    var rate = DATA.rates[nm] || { rx: 0, tx: 0 };
    var yy = ifStartY + i * ifSpacing;
    var curve = (i - ifaceNames.length / 2) * 15;
    drawInfoBox(20, yy - 14, 120, 28, ifaceLabels[nm] || nm, fmtRate(rate.rx + rate.tx), '#00e676');
    var p = makeBezier(140, yy, routerX - 48, routerY, curve);
    pathsIF.push(p);
    drawPathLine(p, '#00e676', 1.2);
  }

  // Router -> Firewall
  pathRF = makeBezier(routerX + 48, routerY, firewallX - 44, firewallY, 0);
  drawPathLine(pathRF, '#ff9100', 2);

  // Firewall -> Devices
  drawLabel(W - 155, devStartY - 20, 'APPAREILS', '#b388ff');
  for (var i = 0; i < topDevs.length; i++) {
    var yy = devStartY + i * devSpacing;
    var curve = (i - topDevs.length / 2) * 12;
    drawInfoBox(W - 153, yy - 11, 143, 24, topDevs[i].hostname || '?', topDevs[i].ipaddr, '#b388ff');
    var p = makeBezier(firewallX + 44, firewallY, W - 153, yy, curve);
    pathsDev.push(p);
    drawPathLine(p, '#b388ff', 0.8);
  }

  // Extra info nodes
  var connNodeX = W * 0.50, connNodeY = H * 0.14;
  var devNodeX = W * 0.50, devNodeY = H * 0.78;
  var secNodeX = W * 0.50, secNodeY = H * 0.46;

  var pathToConn = makeBezier(routerX + 30, routerY - 30, connNodeX, connNodeY + 25, -20);
  var pathToDev = makeBezier(routerX + 30, routerY + 30, devNodeX, devNodeY - 25, 20);
  pathsExtra.push(pathToConn, pathToDev);
  drawPathLine(pathToConn, '#448aff', 0.8);
  drawPathLine(pathToDev, '#b388ff', 0.8);

  // Regenerate particles periodically
  if (frameCount % 250 === 0) {
    particles = [];
    // Interface particles
    for (var i = 0; i < pathsIF.length; i++) {
      var numP = 4 + Math.floor(Math.random() * 4);
      for (var j = 0; j < numP; j++) {
        particles.push(new Particle(pathsIF[i], '#00e676', 0.002 + Math.random() * 0.006));
      }
    }
    // Router->Firewall particles
    for (var j = 0; j < 12; j++) {
      particles.push(new Particle(pathRF, '#ff9100', 0.003 + Math.random() * 0.005));
    }
    // Device particles
    for (var i = 0; i < pathsDev.length; i++) {
      for (var j = 0; j < 4; j++) {
        particles.push(new Particle(pathsDev[i], '#b388ff', 0.002 + Math.random() * 0.005));
      }
    }
    // Extra particles
    for (var i = 0; i < pathsExtra.length; i++) {
      for (var j = 0; j < 3; j++) {
        particles.push(new Particle(pathsExtra[i], '#448aff', 0.002 + Math.random() * 0.004));
      }
    }
  }

  // Update and draw particles
  for (var i = 0; i < particles.length; i++) {
    particles[i].update();
    particles[i].draw(ctx);
  }

  // Draw nodes
  drawNode(routerX, routerY, 46, 'ROUTER', 'OPENWRT', '#00e676', fmtRate((DATA.rates['wan'] || { rx: 0 }).rx));
  drawNode(firewallX, firewallY, 40, 'FIREWALL', DATA.conntrack.length + ' flux', '#ff9100');
  drawNode(connNodeX, connNodeY, 28, String(DATA.conntrack.length), 'CONNEXIONS', '#448aff');
  drawNode(devNodeX, devNodeY, 26, String(DATA.leases.length), 'APPAREILS', '#b388ff');
  drawNode(secNodeX, secNodeY, 18, '\u2713', 'S\u00c9CUR\u00c9', '#00e676');

  frameCount++;
  requestAnimationFrame(renderFrame);
}

/* ===== INIT ===== */
function initApp() {
  initCanvas();
  fetchAllData();
  setInterval(fetchAllData, 3000);
  renderFrame();
}
</script>
</body>
</html>
